# Logs Directory

Эта папка содержит логи взаимодействий с Gemini API.

## Структура логов

Для каждой генерации маршрута создается набор файлов:

### Успешная генерация:
```
session-2024-01-29T12-34-56-789Z-prompt.txt    # Промпт отправленный в Gemini
session-2024-01-29T12-34-56-789Z-response.json  # Ответ от Gemini (JSON)
session-2024-01-29T12-34-56-789Z-summary.txt    # Краткая сводка
```

### Ошибка генерации:
```
error-2024-01-29T12-34-56-789Z-prompt.txt      # Промпт который вызвал ошибку
error-2024-01-29T12-34-56-789Z-error.txt       # Информация об ошибке
```

## Формат файлов

### prompt.txt
Полный текст системного промпта с:
- Контекстом пользователя (время, бюджет, интересы)
- Доступными местами
- Требованиями к маршруту
- Форматом ответа

### response.json
Полный JSON ответ от Gemini с маршрутом, включая:
- Точки маршрута
- Квизы
- Переходы
- Статистику

### summary.txt
Краткая информация:
- Timestamp
- Session ID
- Основные метрики маршрута
- Статус (Success/Error)

### error.txt
При ошибке:
- Сообщение об ошибке
- Stack trace
- Timestamp

## Очистка логов

Логи автоматически НЕ очищаются. Для очистки старых логов (старше 7 дней):

```typescript
import { cleanOldLogs } from '@/lib/logger'
cleanOldLogs(7) // Удалит логи старше 7 дней
```

## Использование

Логирование происходит автоматически при каждом вызове `/api/routes/generate`.

Для просмотра логов конкретной сессии:
1. Найдите нужный session ID в консоли
2. Откройте соответствующие файлы в `logs/`

## Приватность

⚠️ Логи могут содержать персональные данные пользователей (координаты, предпочтения).
Убедитесь что папка `logs/` добавлена в `.gitignore` и НЕ коммитится в git.
